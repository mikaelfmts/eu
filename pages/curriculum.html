<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curriculum - Mikael Ferreira</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="../assets/css/styles.css">

    <!-- Font Awesome para os ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Script -->
    <script type="module" src="../assets/js/script.js"></script>
    
    <!-- Verificação de Manutenção e Carregamento de Currículo -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, doc, onSnapshot, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyA0VoWMLTJIyI54Pj0P5T75gCH6KpgAcbk",
            authDomain: "mikaelfmts.firebaseapp.com",
            projectId: "mikaelfmts",
            storageBucket: "mikaelfmts.firebasestorage.app",
            messagingSenderId: "516762612351",
            appId: "1:516762612351:web:f8a0f229ffd5def8ec054a"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Verificar status de manutenção
        async function checkMaintenanceStatus() {
            try {
                const maintenanceRef = doc(db, 'settings', 'maintenance');
                onSnapshot(maintenanceRef, (doc) => {
                    if (doc.exists()) {
                        const data = doc.data();
                        if (data.enabled) {
                            showMaintenancePage(data);
                        } else {
                            hideMaintenancePage();
                        }
                    } else {
                        hideMaintenancePage();
                    }
                });
            } catch (error) {
                console.error('Erro ao verificar manutenção:', error);
                checkMaintenanceFromLocal();
            }
        }
        
        function checkMaintenanceFromLocal() {
            try {
                const maintenance = localStorage.getItem('maintenanceMode');
                if (maintenance === 'true') {
                    const fallbackData = {
                        title: 'Site em Manutenção',
                        message: 'Estamos trabalhando para melhorar sua experiência. Voltaremos em breve!',
                        eta: null
                    };
                    showMaintenancePage(fallbackData);
                }
            } catch (error) {
                console.error('Erro ao verificar manutenção local:', error);
            }
        }
        
        function showMaintenancePage(data) {
            const maintenanceModal = document.getElementById('maintenance-modal');
            const maintenanceTitle = document.getElementById('maintenance-title');
            const maintenanceMessage = document.getElementById('maintenance-message');
            const maintenanceEta = document.getElementById('maintenance-eta');
            
            if (maintenanceTitle) {
                maintenanceTitle.textContent = data.title || 'Site em Manutenção';
            }
            
            if (maintenanceMessage) {
                maintenanceMessage.textContent = data.message || 'Voltaremos em breve!';
            }
            
            if (data.eta && maintenanceEta) {
                maintenanceEta.textContent = `Previsão de retorno: ${data.eta}`;
                maintenanceEta.style.display = 'block';
            } else if (maintenanceEta) {
                maintenanceEta.style.display = 'none';
            }
            
            if (maintenanceModal) {
                maintenanceModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function hideMaintenancePage() {
            const maintenanceModal = document.getElementById('maintenance-modal');
            if (maintenanceModal) {
                maintenanceModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
        
        // Carregar dados do currículo
        async function loadCurriculumData() {
            try {
                const curriculumRef = doc(db, 'public-curriculum', 'mikael-public');
                const docSnap = await getDoc(curriculumRef);
                
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    renderCurriculum(data);
                } else {
                    console.log('Nenhum dado de currículo encontrado, usando dados padrão');
                    renderDefaultCurriculum();
                }
            } catch (error) {
                console.error('Erro ao carregar currículo:', error);
                renderDefaultCurriculum();
            }
        }
        
        // Renderizar currículo com dados do Firebase
        function renderCurriculum(data) {
            const curriculumSection = document.getElementById('curriculum');
            const { personal, experience, education, technicalSkills, projects, certificates } = data;
            
            // Atualizar cabeçalho se houver dados pessoais
            if (personal && personal.fullName) {
                const titleElement = document.querySelector('.titulo-principal');
                if (titleElement) titleElement.textContent = personal.fullName;
                
                const subtitleElement = document.querySelector('.subtitulo');
                if (subtitleElement && personal.jobTitle) {
                    subtitleElement.innerHTML = `${personal.jobTitle} <i class="fas fa-code"></i>`;
                }
            }
            
            let curriculumHTML = '<h2>Curriculum</h2>';
            
            // Sobre Mim
            if (personal && personal.about) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Sobre Mim</h3>
                        <div class="projeto">
                            <p>${personal.about}</p>
                        </div>
                    </div>
                `;
            }
            
            // Experiência Profissional
            if (experience && experience.length > 0) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Experiência Profissional</h3>
                        ${experience.map(exp => `
                            <div class="projeto">
                                <h4>${exp.position} - ${exp.company}</h4>
                                <p><strong>Período:</strong> ${exp.startDate} - ${exp.endDate || 'Atual'}</p>
                                ${exp.description ? `<p>${exp.description}</p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                // Dados padrão se não houver experiência cadastrada
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Experiência Profissional</h3>
                        <div class="projeto">
                            <h4>Application Programming Interface (API) Creator</h4>
                            <p>ELGAEHOST</p>
                        </div>
                    </div>
                `;
            }
            
            // Formação Acadêmica
            if (education && education.length > 0) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Formação Acadêmica</h3>
                        ${education.map(edu => `
                            <div class="projeto">
                                <h4>${edu.degree} - ${edu.institution}</h4>
                                <p><strong>Período:</strong> ${edu.startDate} - ${edu.endDate || 'Atual'}</p>
                                ${edu.description ? `<p>${edu.description}</p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                // Dados padrão se não houver educação cadastrada
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Formação Acadêmica</h3>
                        <div class="projeto">
                            <h4>Graduating in Information Systems</h4>
                            <p>Expected Graduation: 2029</p>
                        </div>
                    </div>
                `;
            }
            
            // Habilidades Técnicas
            if (technicalSkills && technicalSkills.length > 0) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Habilidades Técnicas</h3>
                        <div class="projeto">
                            <ul>
                                ${technicalSkills.map(skill => `
                                    <li><i class="fas fa-code"></i> ${skill.name}</li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                // Dados padrão se não houver habilidades cadastradas
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Habilidades Técnicas</h3>
                        <div class="projeto">
                            <ul>
                                <li><i class="fab fa-html5"></i> HTML5</li>
                                <li><i class="fab fa-css3-alt"></i> CSS3</li>
                                <li><i class="fab fa-js"></i> JavaScript</li>
                                <li><i class="fab fa-react"></i> React</li>
                                <li><i class="fab fa-node-js"></i> Node.js</li>
                                <li><i class="fab fa-git-alt"></i> Git & GitHub</li>
                                <li><i class="fas fa-database"></i> Bancos de Dados</li>
                                <li><i class="fas fa-server"></i> APIs REST</li>
                                <li><i class="fas fa-mobile-alt"></i> Responsive Design</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            // Projetos
            if (projects && projects.length > 0) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Projetos Destacados</h3>
                        ${projects.slice(0, 5).map(project => `
                            <div class="projeto">
                                <h4>${project.name}</h4>
                                <p>${project.description}</p>
                                ${project.technologies ? `<p><strong>Tecnologias:</strong> ${project.technologies}</p>` : ''}
                                ${project.url ? `<p><a href="${project.url}" target="_blank">Ver Projeto</a></p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Certificações
            if (certificates && certificates.length > 0) {
                curriculumHTML += `
                    <div class="categoria">
                        <h3>Certificações</h3>
                        ${certificates.map(cert => `
                            <div class="projeto">
                                <h4>${cert.name}</h4>
                                <p><strong>Emissor:</strong> ${cert.issuer}</p>
                                ${cert.date ? `<p><strong>Data:</strong> ${cert.date}</p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Adicionar link para download
            curriculumHTML += `
                <a href="curriculo.pdf" target="_blank">
                    <button>Download Curriculum (PDF)</button>
                </a>
            `;
            
            curriculumSection.innerHTML = curriculumHTML;
        }
        
        // Renderizar currículo padrão (fallback)
        function renderDefaultCurriculum() {
            // Manter o conteúdo atual se não conseguir carregar do Firebase
            console.log('Usando currículo padrão');
        }
        
        // Inicializar quando a página carregar
        window.addEventListener('load', () => {
            checkMaintenanceStatus();
            loadCurriculumData();
        });
    </script>
        const db = getFirestore(app);
        
        function checkMaintenanceStatus() {
            try {
                const maintenanceRef = doc(db, 'configuracoes', 'manutencao');
                
                onSnapshot(maintenanceRef, (docSnapshot) => {
                    if (docSnapshot.exists()) {
                        const data = docSnapshot.data();
                        if (data.ativo) {
                            window.location.href = '../index.html';
                        }
                    } else {
                        // Verificar localStorage como fallback
                        checkMaintenanceFromLocal();
                    }
                }, (error) => {
                    console.warn('Erro ao verificar manutenção no Firebase, usando localStorage:', error);
                    checkMaintenanceFromLocal();
                });
            } catch (error) {
                console.warn('Erro ao conectar Firebase, usando localStorage:', error);
                checkMaintenanceFromLocal();
            }
        }
        
        function checkMaintenanceFromLocal() {
            try {
                const stored = localStorage.getItem('maintenanceStatus');
                if (stored) {
                    const data = JSON.parse(stored);
                    if (data.ativo) {
                        window.location.href = '../index.html';
                    }
                }
            } catch (error) {
                console.error('Erro ao verificar localStorage:', error);
            }
        }
        
        window.addEventListener('load', checkMaintenanceStatus);
    </script>
</head>
<body>
    <!-- Container de partículas -->
    <div class="particles-container"></div>

    <!-- Foto do Usuário (Agora Aciona o Menu) -->
    <div class="foto-perfil" onclick="toggleMenu()">
        <img id="profile-photo" src="https://i.ibb.co/BVvyXjRQ/Whats-App-Image-2025-01-29-at-14-52-511.jpg" alt="Foto de Mikael Ferreira">
    </div>

     <!-- Menu Lateral Oculto -->
    <nav id="menu-lateral" class="menu-fechado">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="curriculum.html">Curriculum</a></li>
            <li><a href="projetos.html">All Uploaded Projects</a></li>
            <li><a href="mentors.html">Mentors</a></li>
            <li><a href="certificates-in-progress.html">Certificates in progress</a></li>
            <li><a href="interactive-projects.html">Interactive Projects</a></li>
            <li><a href="games.html">Games</a></li>
        </ul>

        <!-- Bonequinho Dançante -->
        <div class="bonequinho">
            <a href="../login.html">
                <i class="fas fa-user-alt"></i>
            </a>
        </div>
    </nav>

    <!-- Cabeçalho -->
    <header>
        <h1 class="titulo-principal">
            Mikael Ferreira
        </h1>
        <h2 class="subtitulo">
            Desenvolvedor Web Full Stack  
            <i class="fas fa-code"></i> |  
            HTML <i class="fab fa-html5"></i> |
            CSS <i class="fab fa-css3-alt"></i> |  
            JavaScript <i class="fab fa-js"></i> |  
            React <i class="fab fa-react"></i>
        </h2>
    </header>

    <!-- Seção do Currículo -->
    <section id="curriculum">
        <h2>Curriculum</h2>

        <!-- Formação Acadêmica -->
        <div class="categoria">
            <h3>Academic Background</h3>
            <div class="projeto">
                <h4>Graduating in Information Systems</h4>
                <p>Expected Graduation: 2029</p>
            </div>
        </div>

        <!-- Experiência Profissional -->
        <div class="categoria">
            <h3>Professional Experience</h3>
            <div class="projeto">
                <h4>Application Programming Interface (API) Creator</h4>
                <p>ELGAEHOST</p>
            </div>
        </div>

        <!-- Habilidades Técnicas -->
        <div class="categoria">
            <h3>Technical Skills</h3>
            <div class="projeto">
                <ul>
                    <li><i class="fab fa-html5"></i> HTML5</li>
                    <li><i class="fab fa-css3-alt"></i> CSS3</li>
                    <li><i class="fab fa-js"></i> JavaScript</li>
                    <li><i class="fab fa-react"></i> React</li>
                    <li><i class="fab fa-node-js"></i> Node.js</li>
                    <li><i class="fab fa-git-alt"></i> Git & GitHub</li>
                    <li><i class="fas fa-database"></i> Bancos de Dados</li>
                    <li><i class="fas fa-server"></i> APIs REST</li>
                    <li><i class="fas fa-mobile-alt"></i> Responsive Design</li>
                </ul>
            </div>
        </div>

        <!-- Link para Download do Currículo -->
        <a href="curriculo.pdf" target="_blank">
            <button>Download Curriculum (PDF)</button>
        </a>
    </section>

    <!-- Redes Sociais -->
    <section class="redes-sociais">
        <h2>My Social Media</h2>
        <div class="botoes-redes">
            <a href="https://www.tiktok.com/@mikaelfmts" target="_blank" class="social-btn tiktok">
                <i class="fab fa-tiktok"></i>
            </a>
            <a href="https://www.reddit.com/user/mikaelfmts/" target="_blank" class="social-btn reddit">
                <i class="fab fa-reddit"></i>
            </a>
            <a href="https://discord.gg/fffen2a4" target="_blank" class="social-btn discord">
                <i class="fab fa-discord"></i>
            </a>
            <a href="https://github.com/mikaelfmts" target="_blank" class="social-btn github">
                <i class="fab fa-github"></i>
            </a>
        </div>
    </section>

    <!-- Rodapé -->
    <footer>
        <p>© 2025 Mikael Ferreira</p>
        <p>🚀 Make Solutions</p>
    </footer>

</body>
</html>
