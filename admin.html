<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Mikael Ferreira</title>
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0066ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Admin Portfolio">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
      <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
      <!-- Scripts -->
    <script type="module" src="assets/js/auth.js"></script>
    <script type="module" src="assets/js/admin.js"></script>      <style>
        @import url('https://fonts.googleapis.com/css2?family=Marcellus&display=swap');
        
        :root {
            --primary-color: #c8aa6e;
            --secondary-color: #0a1428;
            --accent-color: #1e2328;
            --text-primary: #f0e6d2;
            --text-secondary: #a09b8c;
            --background-primary: #010a13;
            --background-secondary: #0a1428;
            --border-color: #3c3c41;
        }
        
        /* Estilos para o sistema de partículas */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background-color: var(--primary-color);
            border-radius: 50%;
            opacity: 0.5;
            pointer-events: none;
            box-shadow: 0 0 10px var(--primary-color);
            filter: blur(1px);
        }

        .particle.golden {
            background-color: #c8aa6e;
            box-shadow: 0 0 12px #c8aa6e;
        }

        .particle.light {
            background-color: #f0e6d2;
            box-shadow: 0 0 8px #f0e6d2;
            opacity: 0.4;
        }

        .particle.dark {
            background-color: #0a1428;
            box-shadow: 0 0 15px #0a1428;
            opacity: 0.2;
        }
        
        body {
            font-family: 'Marcellus', serif;
            background-color: var(--background-primary);
            background-image: url('https://lolstatic-a.akamaihd.net/frontpage/apps/prod/clash-2018/pt_BR/c9bf09f08bfd566d9b36445f5562432202cf0203/assets/img/patterns/golden-noise.png'),
                linear-gradient(to bottom, var(--background-primary), var(--background-secondary));
            background-blend-mode: overlay;
            background-size: 500px, cover;
            color: var(--text-primary);
        }
        
        .bg-blue-600 {
            background: linear-gradient(to bottom, #1e2328, #433d2b) !important;
            color: var(--primary-color) !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        .text-white {
            color: var(--primary-color) !important;
        }
        
        .bg-white {
            background-color: var(--accent-color) !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        .text-gray-800, .text-gray-700 {
            color: var(--text-primary) !important;
        }
        
        .text-gray-500 {
            color: var(--text-secondary) !important;
        }
        
        .border-gray-300 {
            border-color: var(--primary-color) !important;
        }
        
        .bg-gray-300 {
            background-color: var(--accent-color) !important;
        }
        
        .active.bg-blue-500 {
            background: linear-gradient(to bottom, #1e2328, #785a28) !important;
        }
        
        /* Estilos específicos para PWA */
        .pwa-mode {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .pwa-mode header {
            padding-top: env(safe-area-inset-top);
        }
        
        /* Ajustes para mobile em modo PWA */
        @media (max-width: 768px) {
            .pwa-mode .container {
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
        }
        
        .chat-card {
            transition: all 0.3s ease;
            border: 1px solid var(--primary-color);
            background: var(--accent-color);
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .chat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), #785a28);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .chat-card:hover::before {
            transform: scaleX(1);
        }
        
        .chat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(200, 170, 110, 0.4);
            border-color: #785a28;
        }
        
        .chat-card.active {
            background: linear-gradient(135deg, rgba(200, 170, 110, 0.1), rgba(120, 90, 40, 0.1));
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(200, 170, 110, 0.5);
        }
        
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
            border-radius: 16px;
            padding: 12px 16px;
            position: relative;
            margin: 8px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
        }
        
        .user-message {
            margin-left: auto;
            background: linear-gradient(135deg, var(--primary-color), #785a28);
            color: var(--background-primary);
            border-bottom-right-radius: 6px;
        }
        
        .admin-message {
            margin-right: auto;
            background: rgba(30, 35, 40, 0.9);
            border: 1px solid rgba(200, 170, 110, 0.3);
            border-bottom-left-radius: 6px;
        }
        
        .message-bubble::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 0;
            height: 0;
        }
        
        .user-message::after {
            right: -8px;
            border: 8px solid transparent;
            border-left-color: #785a28;
            border-bottom: none;
        }
        
        .admin-message::after {
            left: -8px;
            border: 8px solid transparent;
            border-right-color: rgba(30, 35, 40, 0.9);
            border-bottom: none;
        }
        
        .chat-header {
            background: linear-gradient(135deg, var(--accent-color), rgba(30, 35, 40, 0.8));
            border-bottom: 2px solid var(--primary-color);
            border-radius: 12px 12px 0 0;
            padding: 20px;
            margin: -24px -24px 20px -24px;
        }
        
        .messages-container {
            background: rgba(1, 10, 19, 0.6);
            border: 1px solid rgba(200, 170, 110, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .chat-input-area {
            background: rgba(30, 35, 40, 0.8);
            border-top: 1px solid var(--primary-color);
            border-radius: 0 0 12px 12px;
            padding: 16px;
            margin: 16px -24px -24px -24px;
        }
        
        .loading {
            animation: pulse 2s infinite;
        }
        
        button {
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        h2, h3 {
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .chat-item {
            animation: slideInUp 0.4s ease-out;
        }
        
        .message-bubble {
            animation: messageAppear 0.3s ease-out;
        }
        
        /* Responsividade melhorada */
        @media (max-width: 1024px) {
            .container {
                padding: 0 16px;
            }
            
            .grid-cols-1.lg\\:grid-cols-3 {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .chat-header {
                margin: -16px -16px 16px -16px;
                padding: 16px;
            }
            
            .message-bubble {
                max-width: 90%;
                padding: 10px 14px;
            }
        }
        
        @media (max-width: 768px) {
            .tab-button {
                padding: 8px 12px;
                font-size: 14px;
            }
            
            .tab-button i {
                display: none;
            }
            
            .messages-container {
                height: 60vh !important;
            }
            
            .message-bubble {
                max-width: 95%;
                font-size: 14px;
            }
            
            .chat-card {
                padding: 12px;
            }
            
            .modal .bg-white {
                margin: 16px;
                max-height: 90vh;
                overflow-y: auto;
            }
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 0 12px;
            }
            
            .nav {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .tab-button {
                flex: 1;
                min-width: 80px;
                text-align: center;
                padding: 6px 8px;
                font-size: 12px;
            }
            
            .bg-white {
                padding: 16px;
            }
            
            .messages-container {
                height: 50vh !important;
                padding: 12px;
            }
            
            .message-bubble {
                padding: 8px 12px;
                font-size: 13px;
                border-radius: 12px;
            }
            
            .user-message::after,
            .admin-message::after {
                display: none;
            }
        }
          /* Scrollbar customizada */
        .messages-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .messages-container::-webkit-scrollbar-track {
            background: rgba(30, 35, 40, 0.5);
            border-radius: 3px;
        }
        
        .messages-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }
        
        .messages-container::-webkit-scrollbar-thumb:hover {
            background: #785a28;
        }
        
        /* Estados de carregamento melhorados */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Melhorias nos botões */
        .tab-button {
            position: relative;
            overflow: hidden;
        }
        
        .tab-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .tab-button:hover::before {
            left: 100%;
        }
        
        /* Efeitos de hover melhorados */
        .bg-white {
            transition: all 0.3s ease;
        }
        
        .bg-white:hover {
            box-shadow: 0 8px 25px rgba(200, 170, 110, 0.1);
        }
        
        /* Tooltips personalizados */
        .tooltip {
            position: relative;
        }
        
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            background: rgba(30, 35, 40, 0.9);
            color: var(--text-primary);
            font-size: 12px;
            border-radius: 6px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        
        .tooltip:hover::after {
            opacity: 1;
        }
        
        /* Status badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-online {
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        
        .status-offline {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .status-maintenance {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        
        /* Fade-in para elementos */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Loading dots animation */
        .loading-dots::after {
            content: '';
            animation: loadingDots 1.5s infinite;
        }
        
        @keyframes loadingDots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Container de partículas -->
    <div class="particles-container"></div>
      <!-- Header -->
    <header class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-4 md:py-6">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <h1 class="text-xl md:text-2xl font-bold">
                    <i class="fas fa-chess-king mr-2"></i>
                    <span class="hidden sm:inline">Câmara do Invocador</span>
                    <span class="sm:hidden">Admin</span>
                </h1>
                <div class="flex items-center space-x-2 md:space-x-4">
                    <span class="text-xs md:text-sm hidden md:block">Carregando usuário...</span>
                    <a href="index.html" class="bg-blue-700 hover:bg-blue-800 px-2 md:px-4 py-2 rounded transition text-sm">
                        <i class="fas fa-home mr-1 md:mr-2"></i>
                        <span class="hidden sm:inline">Voltar ao Site</span>
                        <span class="sm:hidden">Home</span>
                    </a>
                    <!-- O botão de logout será adicionado aqui pelo JavaScript -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">        <!-- Navigation Tabs -->
        <div class="mb-8">
            <nav class="flex flex-wrap space-x-2 md:space-x-4">
                <button onclick="showSection('chat')" id="tab-chat" class="tab-button active bg-blue-500 text-white px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-scroll mr-2 hidden md:inline"></i>Pergaminhos
                </button>
                <button onclick="showSection('uploads')" id="tab-uploads" class="tab-button bg-gray-300 text-gray-700 px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-gem mr-2 hidden md:inline"></i>Artefatos
                </button>
                <button onclick="showSection('users')" id="tab-users" class="tab-button bg-gray-300 text-gray-700 px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-users mr-2 hidden md:inline"></i>Invocadores
                </button>
                <button onclick="showSection('certificates')" id="tab-certificates" class="tab-button bg-gray-300 text-gray-700 px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-certificate mr-2 hidden md:inline"></i>Certificados
                </button>                <button onclick="showSection('maintenance')" id="tab-maintenance" class="tab-button bg-gray-300 text-gray-700 px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-tools mr-2 hidden md:inline"></i>Manutenção
                </button>
                <a href="curriculo-generator.html" class="tab-button bg-purple-500 hover:bg-purple-600 text-white px-4 md:px-6 py-2 rounded-lg transition flex-1 md:flex-none">
                    <i class="fas fa-file-alt mr-2 hidden md:inline"></i>Currículo
                </a>
            </nav>
        </div><!-- Chat Section -->
        <div id="section-chat" class="section">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
                <!-- Lista de Chats -->
                <div class="lg:col-span-1 order-2 lg:order-1">
                    <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-lg md:text-xl font-semibold text-gray-800">
                                <i class="fas fa-scroll mr-2"></i>Pergaminhos
                            </h2>
                            <button onclick="refreshChats()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                          <div id="loading-chats" class="text-center py-8 loading">
                            <div class="inline-flex items-center space-x-2">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                                <span class="text-gray-500 text-sm loading-dots">Carregando chats</span>
                            </div>
                        </div>
                        
                        <div id="chats-list" class="space-y-3 hidden max-h-96 md:max-h-none overflow-y-auto">
                            <!-- Lista de chats será preenchida aqui -->
                        </div>
                        
                        <div id="no-chats" class="text-center py-8 hidden">
                            <i class="fas fa-comments text-3xl md:text-4xl text-gray-300"></i>
                            <p class="text-gray-500 mt-2 text-sm">Nenhum chat encontrado</p>
                        </div>
                    </div>
                </div>

                <!-- Área de Conversação -->
                <div class="lg:col-span-2 order-1 lg:order-2">
                    <div class="bg-white rounded-lg shadow-lg p-4 md:p-6 min-h-96">                        <div id="no-chat-selected" class="text-center py-8 md:py-16">
                            <div class="mb-4">
                                <i class="fas fa-comment-dots text-4xl md:text-6xl text-gray-300"></i>
                            </div>
                            <h3 class="text-lg md:text-xl text-gray-500 mt-4 mb-2">Selecione um chat</h3>
                            <p class="text-gray-400 text-sm md:text-base mb-4">Clique em um chat para ver as mensagens</p>
                            <div class="flex justify-center items-center space-x-2 text-xs text-gray-400">
                                <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                <span>Sistema online</span>
                            </div>
                        </div>
                        
                        <div id="chat-conversation" class="hidden">                            <!-- Header da conversa -->
                            <div class="chat-header">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 id="chat-title" class="text-lg md:text-xl font-semibold text-gray-800 mb-1"></h3>
                                        <div class="flex items-center space-x-4">
                                            <p id="chat-info" class="text-gray-500 text-xs md:text-sm"></p>
                                            <div class="status-badge status-online">
                                                <i class="fas fa-circle text-xs mr-1"></i>
                                                <span>Ativo</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button class="tooltip p-2 text-gray-400 hover:text-gray-600 transition" data-tooltip="Atualizar chat">
                                            <i class="fas fa-sync-alt"></i>
                                        </button>
                                        <button class="tooltip p-2 text-gray-400 hover:text-gray-600 transition" data-tooltip="Mais opções">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mensagens -->
                            <div id="messages-container" class="messages-container h-64 md:h-96 overflow-y-auto p-4 mb-4">
                                <!-- Mensagens serão carregadas aqui -->
                            </div>
                              <!-- Área de resposta rápida -->
                            <div class="chat-input-area">
                                <div class="flex flex-col space-y-3">
                                    <!-- Barra de ações -->
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-2">
                                            <button onclick="openResponseModal()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 md:px-4 py-2 rounded transition text-sm tooltip" data-tooltip="Responder mensagem">
                                                <i class="fas fa-reply mr-1 md:mr-2"></i>
                                                <span class="hidden md:inline">Responder</span>
                                            </button>
                                            <button onclick="markAsRead()" class="bg-green-500 hover:bg-green-600 text-white px-3 md:px-4 py-2 rounded transition text-sm tooltip" data-tooltip="Marcar como lido">
                                                <i class="fas fa-check mr-1 md:mr-2"></i>
                                                <span class="hidden md:inline">Lido</span>
                                            </button>
                                            <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 md:px-4 py-2 rounded transition text-sm tooltip" data-tooltip="Marcar importante">
                                                <i class="fas fa-star mr-1 md:mr-2"></i>
                                                <span class="hidden md:inline">Importante</span>
                                            </button>
                                        </div>
                                        <div class="flex items-center space-x-2 text-xs text-gray-500">
                                            <i class="fas fa-clock"></i>
                                            <span id="chat-timestamp">Agora</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Respostas rápidas -->
                                    <div class="hidden md:flex flex-wrap gap-2" id="quick-responses">
                                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-xs transition" onclick="insertQuickResponse('Olá! Obrigado pela sua mensagem.')">
                                            Saudação
                                        </button>
                                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-xs transition" onclick="insertQuickResponse('Retornarei em breve com uma resposta.')">
                                            Aguardar
                                        </button>
                                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-xs transition" onclick="insertQuickResponse('Obrigado pelo contato!')">
                                            Agradecimento
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>        <!-- Uploads Section -->
        <div id="section-uploads" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-gem mr-2"></i>Forja de Artefatos
                </h2>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-center">
                        <i class="fas fa-info-circle text-blue-500 mr-3"></i>
                        <p class="text-blue-700 text-sm">Forja em construção... Em breve você poderá gerenciar uploads aqui.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Users Section -->
        <div id="section-users" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-users mr-2"></i>Registro de Invocadores
                </h2>
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                    <div class="flex items-center">
                        <i class="fas fa-info-circle text-purple-500 mr-3"></i>
                        <p class="text-purple-700 text-sm">Academia de Invocadores em construção... Em breve você poderá gerenciar usuários aqui.</p>
                    </div>
                </div>
            </div>
        </div>        <!-- Certificates Section -->
        <div id="section-certificates" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
                    <h2 class="text-lg md:text-xl font-semibold text-gray-800">
                        <i class="fas fa-certificate mr-2"></i>Gerenciar Certificados
                    </h2>
                    <button onclick="openCertificateModal()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 md:px-4 py-2 rounded transition text-sm">
                        <i class="fas fa-plus mr-1 md:mr-2"></i>
                        <span class="hidden sm:inline">Novo Certificado</span>
                        <span class="sm:hidden">Novo</span>
                    </button>
                </div>
                
                <div id="loading-certificates" class="text-center py-8 loading">
                    <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                    <p class="text-gray-500 mt-2 text-sm">Carregando certificados...</p>
                </div>
                
                <div id="certificates-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 hidden">
                    <!-- Lista de certificados será preenchida aqui -->
                </div>
                
                <div id="no-certificates" class="text-center py-8 hidden">
                    <i class="fas fa-certificate text-3xl md:text-4xl text-gray-300"></i>
                    <p class="text-gray-500 mt-2 text-sm">Nenhum certificado encontrado</p>
                </div>
            </div>
        </div>        <!-- Maintenance Section -->
        <div id="section-maintenance" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
                    <h2 class="text-lg md:text-xl font-semibold text-gray-800">
                        <i class="fas fa-tools mr-2"></i>Controle de Manutenção
                    </h2>
                </div>
                
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                    <div class="flex flex-col sm:flex-row">
                        <i class="fas fa-exclamation-triangle text-yellow-600 mr-3 mt-1 mb-2 sm:mb-0"></i>
                        <div>
                            <h3 class="text-yellow-800 font-medium">Atenção</h3>
                            <p class="text-yellow-700 text-sm mt-1">
                                Quando ativado, o modo manutenção exibirá uma página especial para todos os visitantes.
                                O login e painel administrativo continuarão funcionando normalmente.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 md:p-6 bg-gray-50 rounded-lg border gap-4">
                        <div>
                            <h3 class="text-lg font-medium text-gray-900">Status do Site</h3>
                            <p class="text-gray-600 text-sm mt-1">Controle o estado de manutenção do site</p>
                        </div>
                        <div class="flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 w-full sm:w-auto">
                            <span id="maintenance-status-text" class="font-medium text-green-600 text-sm">
                                <i class="fas fa-check-circle mr-1"></i>Site Online
                            </span>
                            <button id="maintenance-toggle" onclick="toggleMaintenanceWithFallback()" class="bg-green-500 hover:bg-green-600 text-white px-4 md:px-6 py-2 rounded-lg transition text-sm w-full sm:w-auto">
                                <i class="fas fa-power-off mr-2"></i>Ativar Manutenção
                            </button>
                        </div>
                    </div>
                    
                    <div id="maintenance-form" class="bg-white border rounded-lg p-4 md:p-6 hidden">
                        <h4 class="text-md font-medium text-gray-900 mb-4">Configurar Mensagem de Manutenção</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="maintenance-title" class="block text-sm font-medium text-gray-700 mb-2">Título:</label>
                                <input type="text" id="maintenance-title" value="Site em Manutenção" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                            </div>
                            <div>
                                <label for="maintenance-message" class="block text-sm font-medium text-gray-700 mb-2">Mensagem:</label>
                                <textarea id="maintenance-message" rows="3" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none">Estamos realizando melhorias no site. Voltamos em breve!</textarea>
                            </div>
                            <div>
                                <label for="maintenance-eta" class="block text-sm font-medium text-gray-700 mb-2">Previsão de Retorno (opcional):</label>
                                <input type="text" id="maintenance-eta" placeholder="Ex: em 2 horas, às 15:00..." class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>    <!-- Modal para Responder Mensagem -->
    <div id="response-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-4 md:p-6 w-full max-w-md mx-4">
                <h3 class="text-lg font-semibold mb-4">
                    <i class="fas fa-reply mr-2 text-blue-500"></i>Responder Mensagem
                </h3>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem do usuário:</label>
                    <div id="original-message" class="bg-gray-100 p-3 rounded-lg text-sm max-h-32 overflow-y-auto"></div>
                </div>
                
                <div class="mb-4">
                    <label for="response-text" class="block text-sm font-medium text-gray-700 mb-2">Sua resposta:</label>
                    <textarea id="response-text" rows="4" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="Digite sua resposta..."></textarea>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button onclick="closeResponseModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded transition">
                        Cancelar
                    </button>
                    <button onclick="sendResponse()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">
                        <i class="fas fa-paper-plane mr-2"></i>Enviar
                    </button>
                </div>
            </div>
        </div>
    </div>    <!-- Modal para Certificados -->
    <div id="certificate-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-4 md:p-6 w-full max-w-md mx-4 max-h-90vh overflow-y-auto">
                <h3 class="text-lg font-semibold mb-4">
                    <i class="fas fa-certificate mr-2 text-blue-500"></i>
                    <span id="certificate-modal-title">Adicionar Certificado</span>
                </h3>
                
                <form id="certificate-form" class="space-y-4">
                    <div>
                        <label for="cert-titulo" class="block text-sm font-medium text-gray-700 mb-2">Título:</label>
                        <input type="text" id="cert-titulo" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" placeholder="Ex: Meta Front-End Developer">
                    </div>
                    
                    <div>
                        <label for="cert-instituicao" class="block text-sm font-medium text-gray-700 mb-2">Instituição:</label>
                        <input type="text" id="cert-instituicao" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" placeholder="Ex: Meta (Facebook)">
                    </div>
                    
                    <div>
                        <label for="cert-data" class="block text-sm font-medium text-gray-700 mb-2">Data de Conclusão:</label>
                        <input type="date" id="cert-data" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                    </div>
                    
                    <div>
                        <label for="cert-status" class="block text-sm font-medium text-gray-700 mb-2">Status:</label>
                        <select id="cert-status" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                            <option value="">Selecione...</option>
                            <option value="concluido">Concluído</option>
                            <option value="em progresso">Em Progresso</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="cert-url" class="block text-sm font-medium text-gray-700 mb-2">URL do Certificado:</label>
                        <input type="url" id="cert-url" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" placeholder="https://...">
                    </div>
                </form>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button onclick="closeCertificateModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded transition text-sm">
                        Cancelar
                    </button>
                    <button onclick="saveCertificate()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition text-sm">
                        <i class="fas fa-save mr-2"></i>Salvar
                    </button>
                </div>
            </div>
        </div>
    </div>    <!-- Scripts -->
    <!-- Já incluídos no cabeçalho como módulos -->
    
    <!-- Script para melhorar a UX -->
    <script>
        // Adicionar classes de animação quando elementos entram na tela
        document.addEventListener('DOMContentLoaded', function() {
            // Observador de interseção para animações
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            // Observar elementos que devem ter animação
            document.querySelectorAll('.bg-white, .chat-card').forEach(el => {
                observer.observe(el);
            });
            
            // Melhorar feedback visual dos botões
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', function(e) {
                    // Efeito ripple
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple');
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // Adicionar tooltips automáticos
            document.querySelectorAll('[title]').forEach(el => {
                const title = el.getAttribute('title');
                el.setAttribute('data-tooltip', title);
                el.classList.add('tooltip');
                el.removeAttribute('title');
            });
        });
        
        // Função para mostrar notificações toast
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 transition-all duration-300 transform translate-x-full opacity-0`;
            
            switch(type) {
                case 'success':
                    toast.classList.add('bg-green-500');
                    break;
                case 'error':
                    toast.classList.add('bg-red-500');
                    break;
                case 'warning':
                    toast.classList.add('bg-yellow-500');
                    break;
                default:
                    toast.classList.add('bg-blue-500');
            }
            
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : type === 'warning' ? 'exclamation' : 'info'}-circle mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Mostrar toast
            setTimeout(() => {
                toast.classList.remove('translate-x-full', 'opacity-0');
            }, 100);
            
            // Esconder toast
            setTimeout(() => {
                toast.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }
        
        // Função para aplicar tema escuro baseado na hora
        function applyTimeBasedTheme() {
            const hour = new Date().getHours();
            const isDarkHours = hour < 6 || hour > 20;
            
            if (isDarkHours) {
                document.documentElement.style.setProperty('--background-primary', '#000510');
                document.documentElement.style.setProperty('--accent-color', '#1a1d23');
            }
        }
        
        // Aplicar tema na inicialização
        applyTimeBasedTheme();
        
        // Função para inserir resposta rápida
        function insertQuickResponse(text) {
            const responseTextarea = document.getElementById('response-text');
            if (responseTextarea) {
                responseTextarea.value = text;
                responseTextarea.focus();
            } else {
                // Se o modal não estiver aberto, abrir e inserir texto
                openResponseModal();
                setTimeout(() => {
                    const textarea = document.getElementById('response-text');
                    if (textarea) {
                        textarea.value = text;
                        textarea.focus();
                    }
                }, 100);
            }
        }
        
        // Função para atualizar timestamp do chat
        function updateChatTimestamp() {
            const timestampEl = document.getElementById('chat-timestamp');
            if (timestampEl) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('pt-BR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                timestampEl.textContent = timeString;
            }
        }
        
        // Atualizar timestamp a cada minuto
        setInterval(updateChatTimestamp, 60000);
        updateChatTimestamp(); // Atualizar imediatamente
        
        // Função para aplicar efeitos visuais nos cards de chat
        function enhanceChatCards() {
            document.querySelectorAll('.chat-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
                
                card.addEventListener('click', function() {
                    // Remover classe active de outros cards
                    document.querySelectorAll('.chat-card').forEach(c => c.classList.remove('active'));
                    // Adicionar classe active ao card clicado
                    this.classList.add('active');
                    
                    // Efeito de pulse
                    this.style.animation = 'pulse 0.3s ease-out';
                    setTimeout(() => {
                        this.style.animation = '';
                    }, 300);
                });
            });
        }
        
        // Função para melhorar a experiência dos modais
        function enhanceModals() {
            // Fechar modal ao clicar fora dele
            document.querySelectorAll('.fixed.inset-0').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.add('hidden');
                    }
                });
            });
            
            // Fechar modal com ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.fixed.inset-0:not(.hidden)').forEach(modal => {
                        modal.classList.add('hidden');
                    });
                }
            });
        }
        
        // Função para smooth scroll nos containers
        function enableSmoothScrolling() {
            document.querySelectorAll('.overflow-y-auto').forEach(container => {
                container.style.scrollBehavior = 'smooth';
            });
        }
        
        // Função para detectar se é mobile e ajustar interface
        function detectMobileAndAdjust() {
            const isMobile = window.innerWidth < 768;
            
            if (isMobile) {
                // Ajustar altura dos containers de mensagem
                document.querySelectorAll('.messages-container').forEach(container => {
                    container.style.height = '50vh';
                });
                
                // Esconder elementos desnecessários em mobile
                document.querySelectorAll('.hidden.md\\:flex').forEach(el => {
                    el.style.display = 'none';
                });
            }
        }
        
        // Aplicar melhorias quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            enhanceModals();
            enableSmoothScrolling();
            detectMobileAndAdjust();
            
            // Aplicar melhorias nos cards quando carregados
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        enhanceChatCards();
                    }
                });
            });
            
            // Observar mudanças na lista de chats
            const chatsList = document.getElementById('chats-list');
            if (chatsList) {
                observer.observe(chatsList, { childList: true, subtree: true });
            }
        });
        
        // Redimensionar ao mudar orientação/tamanho da tela
        window.addEventListener('resize', function() {
            detectMobileAndAdjust();
        });
    </script>
    
    <!-- CSS adicional para ripple effect -->
    <style>
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        button {
            position: relative;
            overflow: hidden;
        }
    </style>
      <!-- Sistema de Partículas -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar sistema de partículas melhorado
            initEnhancedParticleSystem();
            
            function initEnhancedParticleSystem() {
                const container = document.querySelector('.particles-container');
                const particles = [];
                
                // Configurações responsivas
                const isMobile = window.innerWidth < 768;
                const config = {
                    particleCount: isMobile ? 15 : 25,
                    minSize: isMobile ? 1 : 2,
                    maxSize: isMobile ? 3 : 5,
                    minSpeed: 0.5,
                    maxSpeed: 2,
                    types: ['golden', 'light', 'dark'],
                    maxParticles: isMobile ? 20 : 30
                };
                
                // Criar partículas iniciais
                for (let i = 0; i < config.particleCount; i++) {
                    createEnhancedParticle(container, config, particles);
                }
                
                // Sistema de reciclagem de partículas
                setInterval(() => {
                    if (particles.length < config.maxParticles && Math.random() < 0.3) {
                        createEnhancedParticle(container, config, particles);
                    }
                }, 2000);
                
                // Limpar partículas antigas
                setInterval(() => {
                    particles.forEach((particle, index) => {
                        if (!particle.element.parentNode) {
                            particles.splice(index, 1);
                        }
                    });
                }, 5000);
            }
            
            function createEnhancedParticle(container, config, particles) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Configurações aleatórias
                const size = Math.random() * (config.maxSize - config.minSize) + config.minSize;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const type = config.types[Math.floor(Math.random() * config.types.length)];
                const duration = Math.random() * 15 + 10;
                const delay = Math.random() * 3;
                
                // Adicionar classe de tipo
                particle.classList.add(type);
                
                // Aplicar propriedades CSS
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                // Adicionar ao DOM
                container.appendChild(particle);
                
                // Armazenar referência
                const particleObj = {
                    element: particle,
                    startTime: Date.now(),
                    duration: duration * 1000
                };
                particles.push(particleObj);
                
                // Movimentação suave usando CSS animations
                particle.style.animation = `particleFloat ${duration}s ease-in-out infinite ${delay}s`;
                
                // Remover após duração
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.style.opacity = '0';
                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                            // Remover da lista
                            const index = particles.findIndex(p => p.element === particle);
                            if (index > -1) {
                                particles.splice(index, 1);
                            }
                        }, 1000);
                    }
                }, (duration + delay) * 1000);
            }
            
            // Pausar partículas quando a página não está visível (otimização)
            document.addEventListener('visibilitychange', function() {
                const particles = document.querySelectorAll('.particle');
                particles.forEach(particle => {
                    if (document.hidden) {
                        particle.style.animationPlayState = 'paused';
                    } else {
                        particle.style.animationPlayState = 'running';
                    }
                });
            });
        });
        
        // CSS keyframes para movimento das partículas
        const style = document.createElement('style');
        style.textContent = `
            @keyframes particleFloat {
                0% {
                    transform: translate(0, 0) rotate(0deg);
                    opacity: 0;
                }
                10% {
                    opacity: 0.8;
                }
                50% {
                    transform: translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px) rotate(180deg);
                    opacity: 1;
                }
                90% {
                    opacity: 0.6;
                }
                100% {
                    transform: translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px) rotate(360deg);
                    opacity: 0;
                }
            }
            
            /* Partículas com movimento mais suave para diferentes tipos */
            .particle.golden {
                animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
            }
            
            .particle.light {
                animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
            
            .particle.dark {
                animation-timing-function: cubic-bezier(0.55, 0.085, 0.68, 0.53);
            }
        `;
        document.head.appendChild(style);
    </script>
    
    <!-- Service Worker para PWA -->
    <script>
        // Registrar Service Worker para funcionalidade PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('assets/js/sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }
        
        // Detectar se está sendo executado como PWA
        window.addEventListener('load', () => {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                                window.navigator.standalone || 
                                document.referrer.includes('android-app://');
            
            if (isStandalone) {
                console.log('Executando como PWA');
                // Adicionar classe CSS para ajustes específicos de PWA
                document.body.classList.add('pwa-mode');
            }
        });
    </script>
</body>
</html>
