<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Mikael Ferreira</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
      <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
      <!-- Scripts -->
    <script type="module" src="assets/js/auth.js"></script>
    <script type="module" src="assets/js/admin.js"></script>      <style>
        @import url('https://fonts.googleapis.com/css2?family=Marcellus&display=swap');
        
        :root {
            --primary-color: #c8aa6e;
            --secondary-color: #0a1428;
            --accent-color: #1e2328;
            --text-primary: #f0e6d2;
            --text-secondary: #a09b8c;
            --background-primary: #010a13;
            --background-secondary: #0a1428;
            --border-color: #3c3c41;
        }
        
        /* Estilos para o sistema de partículas */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background-color: var(--primary-color);
            border-radius: 50%;
            opacity: 0.5;
            pointer-events: none;
            box-shadow: 0 0 10px var(--primary-color);
            filter: blur(1px);
        }

        .particle.golden {
            background-color: #c8aa6e;
            box-shadow: 0 0 12px #c8aa6e;
        }

        .particle.light {
            background-color: #f0e6d2;
            box-shadow: 0 0 8px #f0e6d2;
            opacity: 0.4;
        }

        .particle.dark {
            background-color: #0a1428;
            box-shadow: 0 0 15px #0a1428;
            opacity: 0.2;
        }
        
        body {
            font-family: 'Marcellus', serif;
            background-color: var(--background-primary);
            background-image: url('https://lolstatic-a.akamaihd.net/frontpage/apps/prod/clash-2018/pt_BR/c9bf09f08bfd566d9b36445f5562432202cf0203/assets/img/patterns/golden-noise.png'),
                linear-gradient(to bottom, var(--background-primary), var(--background-secondary));
            background-blend-mode: overlay;
            background-size: 500px, cover;
            color: var(--text-primary);
        }
        
        .bg-blue-600 {
            background: linear-gradient(to bottom, #1e2328, #433d2b) !important;
            color: var(--primary-color) !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        .text-white {
            color: var(--primary-color) !important;
        }
        
        .bg-white {
            background-color: var(--accent-color) !important;
            border: 1px solid var(--primary-color) !important;
        }
        
        .text-gray-800, .text-gray-700 {
            color: var(--text-primary) !important;
        }
        
        .text-gray-500 {
            color: var(--text-secondary) !important;
        }
        
        .border-gray-300 {
            border-color: var(--primary-color) !important;
        }
        
        .bg-gray-300 {
            background-color: var(--accent-color) !important;
        }
        
        .active.bg-blue-500 {
            background: linear-gradient(to bottom, #1e2328, #785a28) !important;
        }
        
        .chat-card {
            transition: all 0.3s ease;
            border: 1px solid var(--primary-color);
            background: var(--accent-color);
        }
        
        .chat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(200, 170, 110, 0.3);
        }
        
        .message-bubble {
            max-width: 80%;
            word-wrap: break-word;
            border-left: 2px solid var(--primary-color);
            background: rgba(30, 35, 40, 0.8);
        }
        
        .user-message {
            margin-left: auto;
        }
        
        .admin-message {
            margin-right: auto;
        }
        
        .loading {
            animation: pulse 2s infinite;
        }
        
        button {
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        h2, h3 {
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Container de partículas -->
    <div class="particles-container"></div>
    
    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold">
                    <i class="fas fa-chess-king mr-2"></i>
                    Câmara do Invocador
                </h1><div class="flex items-center space-x-4">
                    <span class="text-sm">Carregando usuário...</span>
                    <a href="index.html" class="bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded transition">
                        <i class="fas fa-home mr-2"></i>Voltar ao Site
                    </a>
                    <!-- O botão de logout será adicionado aqui pelo JavaScript -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <!-- Navigation Tabs -->
        <div class="mb-8">
            <nav class="flex space-x-4">
                <button onclick="showSection('chat')" id="tab-chat" class="tab-button active bg-blue-500 text-white px-6 py-2 rounded-lg transition">
                    <i class="fas fa-scroll mr-2"></i>Pergaminhos
                </button>
                <button onclick="showSection('uploads')" id="tab-uploads" class="tab-button bg-gray-300 text-gray-700 px-6 py-2 rounded-lg transition">
                    <i class="fas fa-gem mr-2"></i>Artefatos
                </button>                <button onclick="showSection('users')" id="tab-users" class="tab-button bg-gray-300 text-gray-700 px-6 py-2 rounded-lg transition">
                    <i class="fas fa-users mr-2"></i>Invocadores
                </button>                <button onclick="showSection('certificates')" id="tab-certificates" class="tab-button bg-gray-300 text-gray-700 px-6 py-2 rounded-lg transition">
                    <i class="fas fa-certificate mr-2"></i>Meus Certificados
                </button>
                <button onclick="showSection('maintenance')" id="tab-maintenance" class="tab-button bg-gray-300 text-gray-700 px-6 py-2 rounded-lg transition">
                    <i class="fas fa-tools mr-2"></i>Manutenção
                </button>
            </nav>
        </div>

        <!-- Chat Section -->
        <div id="section-chat" class="section">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Lista de Chats -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">
                                <i class="fas fa-scroll mr-2"></i>Pergaminhos de Invocadores
                            </h2>
                            <button onclick="refreshChats()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        
                        <div id="loading-chats" class="text-center py-8 loading">
                            <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                            <p class="text-gray-500 mt-2">Carregando chats...</p>
                        </div>
                        
                        <div id="chats-list" class="space-y-3 hidden">
                            <!-- Lista de chats será preenchida aqui -->
                        </div>
                        
                        <div id="no-chats" class="text-center py-8 hidden">
                            <i class="fas fa-comments text-4xl text-gray-300"></i>
                            <p class="text-gray-500 mt-2">Nenhum chat encontrado</p>
                        </div>
                    </div>
                </div>

                <!-- Área de Conversação -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <div id="no-chat-selected" class="text-center py-16">
                            <i class="fas fa-comment-dots text-6xl text-gray-300"></i>
                            <h3 class="text-xl text-gray-500 mt-4">Selecione um chat para visualizar</h3>
                            <p class="text-gray-400">Clique em um chat da lista ao lado para ver as mensagens</p>
                        </div>
                        
                        <div id="chat-conversation" class="hidden">
                            <!-- Header da conversa -->
                            <div class="border-b pb-4 mb-6">
                                <h3 id="chat-title" class="text-xl font-semibold text-gray-800"></h3>
                                <p id="chat-info" class="text-gray-500 text-sm"></p>
                            </div>
                            
                            <!-- Mensagens -->
                            <div id="messages-container" class="h-96 overflow-y-auto border rounded-lg p-4 mb-4 bg-gray-50">
                                <!-- Mensagens serão carregadas aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Uploads Section -->
        <div id="section-uploads" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-gem mr-2"></i>Forja de Artefatos
                </h2>
                <p class="text-gray-500">Forja em construção...</p>
            </div>
        </div>        <!-- Users Section -->
        <div id="section-users" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-users mr-2"></i>Registro de Invocadores
                </h2>
                <p class="text-gray-500">Academia de Invocadores em construção...</p>
            </div>
        </div>        <!-- Certificates Section -->
        <div id="section-certificates" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">
                        <i class="fas fa-certificate mr-2"></i>Gerenciar Certificados
                    </h2>
                    <button onclick="openCertificateModal()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">
                        <i class="fas fa-plus mr-2"></i>Novo Certificado
                    </button>
                </div>
                
                <div id="loading-certificates" class="text-center py-8 loading">
                    <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                    <p class="text-gray-500 mt-2">Carregando certificados...</p>
                </div>
                
                <div id="certificates-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 hidden">
                    <!-- Lista de certificados será preenchida aqui -->
                </div>
                
                <div id="no-certificates" class="text-center py-8 hidden">
                    <i class="fas fa-certificate text-4xl text-gray-300"></i>
                    <p class="text-gray-500 mt-2">Nenhum certificado encontrado</p>
                </div>
            </div>
        </div>

        <!-- Maintenance Section -->
        <div id="section-maintenance" class="section hidden">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">
                        <i class="fas fa-tools mr-2"></i>Controle de Manutenção
                    </h2>
                </div>
                
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                    <div class="flex">
                        <i class="fas fa-exclamation-triangle text-yellow-600 mr-3 mt-1"></i>
                        <div>
                            <h3 class="text-yellow-800 font-medium">Atenção</h3>
                            <p class="text-yellow-700 text-sm mt-1">
                                Quando ativado, o modo manutenção exibirá uma página especial para todos os visitantes.
                                O login e painel administrativo continuarão funcionando normalmente.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="flex items-center justify-between p-6 bg-gray-50 rounded-lg border">
                        <div>
                            <h3 class="text-lg font-medium text-gray-900">Status do Site</h3>
                            <p class="text-gray-600 text-sm mt-1">Controle o estado de manutenção do site</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <span id="maintenance-status-text" class="font-medium text-green-600">
                                <i class="fas fa-check-circle mr-1"></i>Site Online
                            </span>                            <button id="maintenance-toggle" onclick="toggleMaintenanceWithFallback()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition">
                                <i class="fas fa-power-off mr-2"></i>Ativar Manutenção
                            </button>
                        </div>
                    </div>
                    
                    <div id="maintenance-form" class="bg-white border rounded-lg p-6 hidden">
                        <h4 class="text-md font-medium text-gray-900 mb-4">Configurar Mensagem de Manutenção</h4>
                        <div class="space-y-4">
                            <div>
                                <label for="maintenance-title" class="block text-sm font-medium text-gray-700 mb-2">Título:</label>
                                <input type="text" id="maintenance-title" value="Site em Manutenção" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="maintenance-message" class="block text-sm font-medium text-gray-700 mb-2">Mensagem:</label>
                                <textarea id="maintenance-message" rows="3" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">Estamos realizando melhorias no site. Voltamos em breve!</textarea>
                            </div>
                            <div>
                                <label for="maintenance-eta" class="block text-sm font-medium text-gray-700 mb-2">Previsão de Retorno (opcional):</label>
                                <input type="text" id="maintenance-eta" placeholder="Ex: em 2 horas, às 15:00..." class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Responder Mensagem -->
    <div id="response-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h3 class="text-lg font-semibold mb-4">Responder Mensagem</h3>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem do usuário:</label>
                    <p id="original-message" class="bg-gray-100 p-3 rounded text-sm"></p>
                </div>
                
                <div class="mb-4">
                    <label for="response-text" class="block text-sm font-medium text-gray-700 mb-2">Sua resposta:</label>
                    <textarea id="response-text" rows="4" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Digite sua resposta..."></textarea>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button onclick="closeResponseModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded transition">
                        Cancelar
                    </button>
                    <button onclick="sendResponse()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">
                        <i class="fas fa-paper-plane mr-2"></i>Enviar
                    </button>                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Certificados -->
    <div id="certificate-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h3 class="text-lg font-semibold mb-4">
                    <span id="certificate-modal-title">Adicionar Certificado</span>
                </h3>
                
                <form id="certificate-form">
                    <div class="mb-4">
                        <label for="cert-titulo" class="block text-sm font-medium text-gray-700 mb-2">Título:</label>
                        <input type="text" id="cert-titulo" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: Meta Front-End Developer">
                    </div>
                    
                    <div class="mb-4">
                        <label for="cert-instituicao" class="block text-sm font-medium text-gray-700 mb-2">Instituição:</label>
                        <input type="text" id="cert-instituicao" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: Meta (Facebook)">
                    </div>
                    
                    <div class="mb-4">
                        <label for="cert-data" class="block text-sm font-medium text-gray-700 mb-2">Data de Conclusão:</label>
                        <input type="date" id="cert-data" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <div class="mb-4">
                        <label for="cert-status" class="block text-sm font-medium text-gray-700 mb-2">Status:</label>
                        <select id="cert-status" required class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Selecione...</option>
                            <option value="concluido">Concluído</option>
                            <option value="em progresso">Em Progresso</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label for="cert-url" class="block text-sm font-medium text-gray-700 mb-2">URL do Certificado:</label>
                        <input type="url" id="cert-url" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="https://...">
                    </div>
                </form>
                
                <div class="flex justify-end space-x-3">
                    <button onclick="closeCertificateModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded transition">
                        Cancelar
                    </button>
                    <button onclick="saveCertificate()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">
                        <i class="fas fa-save mr-2"></i>Salvar
                    </button>
                </div>
            </div>
        </div>    </div>    <!-- Scripts -->
    <!-- Já incluídos no cabeçalho como módulos -->
    
    <!-- Sistema de Partículas -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar sistema de partículas
            initParticleSystem();
            
            function initParticleSystem() {
                // Usar o container de partículas existente
                const container = document.querySelector('.particles-container');
                
                // Configurações
                const config = {
                    particleCount: 30,
                    minSize: 2,
                    maxSize: 5,
                    minSpeed: 1,
                    maxSpeed: 3,
                    types: ['golden', 'light', 'dark']
                };
                
                // Criar partículas iniciais
                for (let i = 0; i < config.particleCount; i++) {
                    createParticle(container, config);
                }
            }
            
            function createParticle(container, config) {
                // Criar elemento da partícula
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Configurações aleatórias para esta partícula
                const size = Math.random() * (config.maxSize - config.minSize) + config.minSize;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const speed = Math.random() * (config.maxSpeed - config.minSpeed) + config.minSpeed;
                const delay = Math.random() * 5;
                const duration = Math.random() * 10 + 15;
                const type = config.types[Math.floor(Math.random() * config.types.length)];
                
                // Adicionar classe de tipo
                particle.classList.add(type);
                
                // Aplicar propriedades CSS
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                
                // Adicionar ao DOM
                container.appendChild(particle);
                
                // Movimentação simples com setTimeout para compatibilidade
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    createParticle(container, config);
                }, (duration + delay) * 1000);
                
                // Animar a partícula
                particle.style.transition = `all ${duration}s ease-in-out`;
                setTimeout(() => {
                    particle.style.transform = `translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px) rotate(${Math.random() * 360}deg)`;
                    particle.style.opacity = '0.8';
                }, 10);
                
                setTimeout(() => {
                    particle.style.transform = `translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px) rotate(${Math.random() * 720}deg)`;
                    particle.style.opacity = '0';
                }, (duration / 2) * 1000);
            }
        });
    </script>
</body>
</html>
