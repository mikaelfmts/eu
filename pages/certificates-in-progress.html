<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificates-in-progress</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/minerva-styles.css">

    <!-- Font Awesome para os ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- Script -->
    <script type="module" src="../assets/js/script.js"></script>
    <script type="module" src="../assets/js/page-control.js"></script>
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, collection, onSnapshot, query, where } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        import firebaseConfig from '../assets/js/firebase-config.js';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Load certificates when page loads
        window.addEventListener('load', () => {
            // Inicializar controle de página (inclui verificação de manutenção)
            initPageControl('certificates-in-progress');
            loadCertificates();
        });

        async function loadCertificates() {
            try {
                const certificatesRef = collection(db, 'certificados');
                
                // Carregar certificados em progresso
                const qInProgress = query(certificatesRef, where('status', '==', 'em progresso'));
                onSnapshot(qInProgress, (snapshot) => {
                    displayCertificates(snapshot.docs.map(doc => ({id: doc.id, ...doc.data()})), 'em-progresso');
                });
                
                // Carregar certificados concluídos
                const qCompleted = query(certificatesRef, where('status', '==', 'concluido'));
                onSnapshot(qCompleted, (snapshot) => {
                    displayCertificates(snapshot.docs.map(doc => ({id: doc.id, ...doc.data()})), 'concluidos');
                });
                
            } catch (error) {
                console.error('Erro ao carregar certificados:', error);
                displayStaticCertificates();
            }
        }

        function displayCertificates(certificates, type) {
            const containerId = type === 'concluidos' ? 'certificados-concluidos-dinamicos' : 'certificados-dinamicos';
            const container = document.getElementById(containerId);
            
            if (certificates.length === 0) {
                if (type === 'em-progresso') {
                    displayStaticCertificates();
                } else {
                    container.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhum certificado concluído encontrado.</p>';
                }
                return;
            }

            container.innerHTML = certificates.map(cert => `
                <div class="certificados">
                    <h3>${cert.titulo}</h3>
                    ${cert.instituicao ? `<p>${cert.instituicao}</p>` : ''}
                    ${cert.dataConclusao ? `<p class="text-sm text-gray-600">${type === 'concluidos' ? 'Concluído em:' : 'Previsão:'} ${cert.dataConclusao}</p>` : ''}
                    ${cert.certificadoUrl ? `<a href="${cert.certificadoUrl}" target="_blank" class="text-blue-600 hover:underline">Ver Certificado</a>` : ''}
                </div>
            `).join('');
        }

        function displayStaticCertificates() {
            const container = document.getElementById('certificados-dinamicos');
            container.innerHTML = `
                <!-- Certificação: Formando em Sistemas de Informação -->
                <div class="certificados">
                    <h3>Information Systems</h3>
                    <p>Universidade de Fortaleza</p>
                </div>

                <!-- Certificação: Meta Front-End Developer -->
                <div class="certificados">
                    <h3>Meta Front-End Developer Professional Certificate</h3>
                    <h5>Comprehensive training in modern front-end development including React, responsive design, and front-end performance optimization.</h5>
                    <p>Meta (Facebook)</p>
                </div>

                <!-- Certificação: Full-Stack Web Development -->
                <div class="certificados">
                    <h3>Full-Stack JavaScript Development Bootcamp</h3>
                    <h5>Intensive program covering MERN stack (MongoDB, Express, React, Node.js), RESTful APIs, and modern web development practices.</h5>
                    <p>Udemy</p>
                </div>

                <!-- Certificação: Google IT Automation with Python -->
                <div class="certificados">
                    <h3>Google IT Automation with Python Professional Certificate</h3>
                    <h5>Hands-on experience in Python programming, automation tasks, and solving real-world IT problems using Python scripts.</h5>
                    <p>Google Inc</p>
                </div>
            `;
        }
    </script>
</head>
<body>
    <!-- Container de partículas -->
    <div class="particles-container"></div>

    <!-- Foto do Usuário (Agora Aciona o Menu) -->
    <div class="foto-perfil" onclick="toggleMenu()">
        <img id="profile-photo" src="https://i.ibb.co/BVvyXjRQ/Whats-App-Image-2025-01-29-at-14-52-511.jpg" alt="Foto de Mikael Ferreira">
    </div>

   <!-- Menu Lateral Oculto -->
    <nav id="menu-lateral" class="menu-fechado">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="curriculum.html">Curriculum</a></li>
            <li><a href="projetos.html">All Uploaded Projects</a></li>
            <li><a href="mentors.html">Mentors</a></li>
            <li><a href="certificates-in-progress.html">Certificates in progress</a></li>
            <li><a href="interactive-projects.html">Interactive Projects</a></li>
            <li><a href="games.html">Games</a></li>
        </ul>

        <!-- Bonequinho Dançante -->
        <div class="bonequinho">
            <a href="../admin.html" title="Painel Admin">
                <i class="fas fa-user-alt"></i>
            </a>
        </div>
    </nav>

    <!-- Cabeçalho -->
    <header>
        <h1 class="titulo-principal">
            Mikael Ferreira
        </h1>
        <h2 class="subtitulo">
            Desenvolvedor Web Full Stack  
            <i class="fas fa-code"></i> |  
            HTML <i class="fab fa-html5"></i> |
            CSS <i class="fab fa-css3-alt"></i> |  
            JavaScript <i class="fab fa-js"></i> |  
            React <i class="fab fa-react"></i>
        </h2>
    </header>

    <!-- Seção das Certificações -->
    <section id="certificados">
        <h2>Certificates in progress</h2>

        <div id="certificados-dinamicos">
            <!-- Loading state -->
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                <p class="text-gray-500 mt-2">Carregando certificados...</p>
            </div>
        </div>

        <a href="curriculo.pdf" target="_blank">
            <button>Solicite minhas certificações em PDF</button>
        </a>
        
        <div class="mt-4 text-center">
            <a href="../admin.html" class="text-sm text-blue-600 hover:underline">
                <i class="fas fa-cog mr-1"></i>Gerenciar Certificados (Mikael)
            </a>
        </div>
    </section>

    <!-- Seção de Certificados Concluídos -->
    <section id="certificados-concluidos" class="mt-12">
        <h2>Completed Certificates</h2>

        <div id="certificados-concluidos-dinamicos">
            <!-- Loading state -->
            <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                <p class="text-gray-500 mt-2">Carregando certificados concluídos...</p>
            </div>
        </div>
    </section>

    <!-- Redes Sociais -->
    <section class="redes-sociais">
        <h2>My Social Media</h2>
        <div class="botoes-redes">
            <a href="https://www.tiktok.com/@mikaelfmts" target="_blank" class="social-btn tiktok">
                <i class="fab fa-tiktok"></i>
            </a>
            <a href="https://www.reddit.com/user/mikaelfmts/" target="_blank" class="social-btn reddit">
                <i class="fab fa-reddit"></i>
            </a>
            <a href="https://discord.gg/fffen2a4" target="_blank" class="social-btn discord">
                <i class="fab fa-discord"></i>
            </a>
            <a href="https://github.com/mikaelfmts" target="_blank" class="social-btn github">
                <i class="fab fa-github"></i>
            </a>
        </div>
    </section>

    <!-- Chatbot -->
    <div id="chatbot">
        <div id="chat-header" onclick="toggleChat()">
            <i class="fas fa-crown"></i> Summoner's Chat
        </div>
        <div id="chat-body">
            <!-- Formulário de nome (mostrado inicialmente) -->
            <div id="name-form" style="display: block;">
                <div class="name-input-area">
                    <p>Como devo chamá-lo, Invocador?</p>
                    <input type="text" id="name-input" placeholder="Digite seu nome..." maxlength="50">
                    <button onclick="setUserName()">Entrar no Rift</button>
                </div>
            </div>
            
            <!-- Área do chat (oculta inicialmente) -->
            <div id="chat-area" style="display: none;">
                <div id="chat-messages"></div>
                <div id="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
                    <button onclick="sendMessage()"><i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Rodapé -->
    <footer>
        <p>© 2025 Mikael Ferreira</p>
    </footer>

    <!-- Minerva Assistant -->
    <script type="module" src="../assets/js/minerva-assistant.js"></script>

</body>
</html>
